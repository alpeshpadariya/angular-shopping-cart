<div class="row">
  <div class="col-md-2">
    <!-- <app-leftnav></app-leftnav> -->
  </div>
  <div class="col-md-10 mrgtop5">
    <div class="container">
      <div class="row">
        <div class="col-md-12 mrgnbtm">
          <h2>ToDo List</h2>
          <form [formGroup]="todoForm" (ngSubmit)="onSubmit()">
            <div class="row">
              <div class="form-group col-md-6">
                <label for="exampleInputEmail1">Title</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="title"
                  id="exampleInputEmail1"
                  aria-describedby="emailHelp"
                  placeholder="Create a title"
                />
              </div>
              <div class="form-group col-md-6">
                <label for="exampleInputPassword1">Price</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="price"
                  id="exampleInputPassword1"
                  placeholder="price"
                />
              </div>
            </div>
            <div class="row">
              <div class="form-group col-md-12">
                <label for="sel1">category:</label>
                <select
                  formControlName="category"
                  class="form-control"
                  id="sel1"
                >
                  <option>men clothing</option>
                  <option>jewelery</option>
                </select>
              </div>
            </div>
            <button
              type="submit"
              [disabled]="!todoForm.valid"
              class="btn btn-danger"
            >
              Create
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- <div class="mrgnbtm">
        <app-tasks
          *ngIf="tasks !== undefined && tasks?.length !== 0"
          [tasks]="tasks"
          (deleteTask)="deleteTask($event)"
          (editTask)="editTask($event)"
          >
        </app-tasks>
      </div> -->
  </div>
</div>

<div class="container" *ngIf="tasks !== undefined && tasks?.length !== 0">
  <h2>Products Lists</h2>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <th style="width: 400px">Price</th>
        <th>Category</th>
        <th>Price</th>
        <th>Image</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let task of tasks; let i = index">
        <td>
          {{ task.id }}
        </td>
        <td>
          {{ task.title }}
        </td>
        <td>{{ task.category }}</td>
        <td>{{ task.price }} $</td>
        <td><img src="{{ task.image }}" height="100" width="100" /></td>
        <td>
          <div class="row">
            <div class="col-md-4">
              <button
                type="button"
                (click)="openModal(template, task)"
                class="btn btn-warning right"
              >
                Edit
              </button>
            </div>

            <div class="col-md-4">
              <button
                type="button"
                (click)="delProduct(task)"
                class="btn btn-danger right"
              >
                Delete
              </button>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Task Edit</h4>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="editForm" (ngSubmit)="onSubmit()">
      <div class="row">
        <div class="form-group col-md-6">
          <label for="exampleInputEmail1">Title</label>
          <input
            type="text"
            class="form-control"
            formControlName="title"
            id="exampleInputEmail1"
            placeholder="Create Title"
          />
        </div>
      </div>
      <div class="row">
        <div class="form-group col-md-6">
          <label for="exampleInputPassword1">Price</label>
          <input
            type="text"
            class="form-control"
            formControlName="price"
            id="exampleInputPassword1"
            placeholder="Assignee"
          />
        </div>
      </div>
      <div class="row">
        <div class="form-group col-md-6">
          <label for="sel1">Status:</label>
          <select formControlName="category" class="form-control" id="sel1">
            <option>men clothing</option>
            <option>jewelery</option>
          </select>
        </div>
      </div>
      <div class="btncenter">
        <button
          type="submit"
          [disabled]="!editForm.valid"
          class="btn btn-danger"
        >
          Confirm
        </button>
      </div>
    </form>
  </div>
</ng-template>
